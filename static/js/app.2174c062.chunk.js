(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{339:function(e,t,n){e.exports=n.p+"static/media/faceMask.a6159fe4.png"},340:function(e,t,n){e.exports=n.p+"static/media/gel.0c1e1139.png"},341:function(e,t,n){e.exports=n.p+"static/media/gloves2.cba5c35f.png"},342:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAADl0lEQVR42u1a3U4TQRTeFjGUlAsFmti+QkMo+AKEK8GXwOoD0HabNn0BqbfS31vAWG8L14QXwARMoGiivQQT8YaKQvWMHm/WmZ3Zn9kfOyf5kma785053+7OnDMzmqZMmTJlyrw1XdfXAa8NWB8lATqAnwZ0lABKACXASAQ/AehSBCDXJv7HgMcBjwAvAUeAG0rwf3GD92wCVgB3wxz4A8BzwLlJwDycI0cyTIHHsdNXDgI34go540EPfgnw0cXAjfhEfAQxcIIS5/t2C8RHmfgMSvBRQEOg418BrwDPAA8BM4A7iBm89hSwg/fy+IjPqK/BF4tFTSD4Mwxs0oKok9jmTEAEX59+2aRzA/2PjTucQovIxfJT9nPAY33zHwBzLvqaQ07WmLDkdfBxHJFpHXoLSEjwmUBu1uwQ91KADZMnn5Dol4jwnuF7w6vgk4wkZ+Dma8/5HAaMZCnp59PXPXwDdV/eAlKcAC4ojnuioz3cNw+oAU4A3xAneG3ewuxAmyIvpBZQWKHRlM8KtI0BmoChyZQ2xHtiAnxZBseKTAFqFIeXvA5j8PsW0t19QU5axrgpU4BjisNtgXZNGzl/U4B3h9LuSFbwMUbikxX45oc2BBjyxgRMl2mJUcxpsLR1+y6jo4scrrqDyq/O4V5ktOs62ndgLFqyMM3hOnUgwCmHe9oCV0eWAGMcrmsHAlxzuMeUAAEQ4D6HqxfGTyAHeGPAHoN4gcPVcCBAw+YguEfpf86vaTDjYBrM2MgGnU+DEhKhtg0B2gK825R2xzIzwbqDVPjAQvAHgpyXlLY1mQKsMjr8RPATagsUQ22RBVTik8GxGvRyeAEHRlLO/gB8x99N3oBqKId7npfD6LzKUL5glatUKv2GjT4UfFsWAycpkyWptAf+0yZLcimvlqSqJpsgsxL9zppsllS9XBWeAvQZHTmUIQIGf8jwSfoy5fXewDLg1uRNSLv82rOePOnDsl+7QxXOnn7eha2xPOesQUXzy8B5BNDiFTSANSvpKeYMawJrCa18Ph/R/DTcHm8JZHdfAFuYwJD64B62jeLvDP63xcjw/gne9+1xw5tQMRkT3ATxUSkUChEtaIYDY19i8H3fBjyLU2SVs6dvFYTrhedTnQsZY5VRO4jiMwae0sJqWEA9xlL6Hecg1S3eU8c24T0oaSIIOf+zSwl+18o5orCLoE6LKwGUAKMtQM71dXtlypQpU2bdfgGYzbrVsTSJ+wAAAABJRU5ErkJggg=="},350:function(e,t,n){"use strict";var r=n(6),o=n.n(r),a=n(22),i=n.n(a),c=(n(46),n(0)),s=n.n(c),l=n(141),u=n(109),d=n(314),p=n(9),f=n.n(p),m=n(4),h=n(3),g=n(51),y=n(41),b=n(344),v=n(72),w=n(69),C=n(13),O=n(189),S=n(8),E=n.n(S),A=n(10),x=n.n(A),j=n(11),P=n.n(j),R=n(12),T=n.n(R),I=n(2),B=n.n(I),k=n(23),D=n.n(k),M=n(83),H=n(29),L=n.n(H);function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var F=function(e){P()(r,e);var t,n=(t=r,function(){var e,n=B()(t);if(z()){var r=B()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return T()(this,e)});function r(){return E()(this,r),n.apply(this,arguments)}return x()(r,[{key:"render",value:function(){var e=this.props,t=e.description,n=e.title,r=e.coordinate,o=e.children,a=e.onPress,i=e.pinColor,c=L()(e,["description","title","coordinate","children","onPress","pinColor"]),l="https://maps.google.com/mapfiles/ms/icons/"+i+"-dot.png";return s.a.createElement(M.Marker,D()({},c,{onClick:a,title:t?n+"\n"+t:n,position:{lat:r.latitude,lng:r.longitude},icon:l}),o)}}]),r}(c.Component);function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var V=function(e){P()(r,e);var t,n=(t=r,function(){var e,n=B()(t);if(U()){var r=B()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return T()(this,e)});function r(){return E()(this,r),n.apply(this,arguments)}return x()(r,[{key:"render",value:function(){return s.a.createElement(M.Polyline,this.props)}}]),r}(c.Component);function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var N=function(e){P()(r,e);var t,n=(t=r,function(){var e,n=B()(t);if(G()){var r=B()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return T()(this,e)});function r(){return E()(this,r),n.apply(this,arguments)}return x()(r,[{key:"render",value:function(){var e=this.props,t=e.onPress,n=L()(e,["onPress"]);return s.a.createElement(g.a,{onPress:t},s.a.createElement(M.InfoWindow,D()({onCloseClick:this.props.hideCallout},n),this.props.children))}}]),r}(c.Component);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var K=Object(M.withGoogleMap)((function(e){return s.a.createElement(M.GoogleMap,D()({},e,{ref:e.handleMapMounted}))})),J=function(e){P()(r,e);var t,n=(t=r,function(){var e,n=B()(t);if(X()){var r=B()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return T()(this,e)});function r(){var e;E()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).state={center:null},e.handleMapMounted=function(t){e.map=t,e.props.onMapReady&&e.props.onMapReady()},e.onDragEnd=function(){var t=e.props.onRegionChangeComplete;if(e.map&&t){var n=e.map.getCenter();t({latitude:n.lat(),longitude:n.lng()})}},e}return x()(r,[{key:"animateToRegion",value:function(e){this.setState({center:{lat:e.latitude,lng:e.longitude}})}},{key:"render",value:function(){var e=this.props,t=e.region,n=e.initialRegion,r=e.onRegionChange,o=e.onPress,a=e.options,i=this.state.center,c=this.props.style||Y.container,l=t?{center:{lat:t.latitude,lng:t.longitude}}:i?{center:i}:{defaultCenter:{lat:n&&n.latitude,lng:n&&n.longitude}};return s.a.createElement(h.a,{style:c},s.a.createElement(K,D()({handleMapMounted:this.handleMapMounted,containerElement:s.a.createElement("div",{style:{height:"100%"}}),mapElement:s.a.createElement("div",{style:{height:"100%"}})},l,{onDragStart:r,onIdle:this.onDragEnd,defaultZoom:15,onClick:o,options:Q({fullscreenControl:!1,mapTypeControl:!1},a,{zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}})}),this.props.children))}}]),r}(c.Component);J.Marker=F,J.Polyline=V,J.Callout=N;var Y=m.a.create({container:{height:"100%"}}),q=J,Z=n(334);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){var t=e.containerStyle,n=e.items,r=e.onItemSelect,o=e.textInputProps,a=e.inputHeight,i=n.map((function(e){return{label:e.name,value:e.value}}));return s.a.createElement(h.a,{style:[t,{overflow:"visible"}]},s.a.createElement(Z.Select,{isClearable:!1,optionHeight:36,theme:function(e){return $({},e,{borderRadius:5,colors:$({},e.colors,{primary25:"#4C9AFF",primary:"#4C9AFF"}),spacing:$({},e.spacing,{controlHeight:a,menuGlutter:0})})},styles:{container:function(e,t){return $({},e,{fontSize:14,border:"none",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", sans-serif'})},control:function(e,t){return $({},e,{border:"none",minHeight:a,zIndex:0})},menu:function(e,t){return $({},e,{zIndex:9999})}},isSearchable:!0,autoFocus:!0,name:"city",placeholder:o&&o.placeholder,options:i,onChange:function(e){var t=e.label,n=e.value;return r({name:t,value:n})}}))}var te=n(602),ne="https://covid-19-hospital-finder.herokuapp.com",re={HOSPITALS:ne+"/hospitals",USERS:ne+"/users",LOGIN:ne+"/login",VOTE:ne+"/score",PRODUCTS:ne+"/products",PROVINCES:ne+"/provinces/areas",USER_PHARMACY:ne+"/user/pharmacy",PHARMACY_STOCK:ne+"/user/pharmacy/stock",PHARMACIES:ne+"/pharmacies"};function oe(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(re.PRODUCTS,{method:"GET",headers:ce()}).then(se));case 1:case"end":return e.stop()}}),null,null,null,Promise)}function ae(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(re.PROVINCES,{method:"GET",headers:ce()}).then(se));case 1:case"end":return e.stop()}}),null,null,null,Promise)}function ie(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=te.stringify(e),n.abrupt("return",fetch(re.PHARMACIES+"?"+t,{method:"GET",headers:ce()}).then(se));case 2:case"end":return n.stop()}}),null,null,null,Promise)}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{"Content-Type":"application/json",Authorization:e?"Bearer "+e:void 0}}function se(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(e.json());case 2:if(!(t=n.sent).error){n.next=5;break}throw Error(t.error);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,null,null,Promise)}var le=Object(c.createContext)({user:{email:"",name:"",hospitalId:0},setUser:function(e){return e},logout:function(){return null}});var ue=function(){return Object(c.useContext)(le)},de=["#cc3232","#db7b2b","#e7b416","#99c140","#2dc937"],pe=n(339),fe=n.n(pe),me=n(340),he=n.n(me),ge=n(341),ye=n.n(ge),be=n(342),ve=n.n(be),we={mask:fe.a,handSanitizer:he.a,gloves:ye.a,compass:ve.a},Ce=n(233);function Oe(){for(var e="web"!==C.a.OS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e?Ce.a.alert.apply(Ce.a,n):alert(n.join("\n\n"))}var Se="#4c4c4d",Ee="#323130",Ae="#201f1e",xe="#000000",je="#ffffff";function Pe(e){var t=e.style,n=ue().user,r=Object(c.useState)(null),o=i()(r,2),a=o[0],l=o[1],u=Object(c.useState)([]),d=i()(u,2),p=d[0],m=d[1];function b(e){var t=a.products.some((function(t){return t.id===e.id}));(function(e,t,n){var r,o;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r={productId:t,stock:n},o={method:"PUT",headers:ce(e),body:JSON.stringify(r)},a.abrupt("return",fetch(re.PHARMACY_STOCK,o).then(se));case 3:case"end":return a.stop()}}),null,null,null,Promise)})(n.token,e.id,!t).then(l).catch((function(e){return Oe("Error actualizando el stock",String(e))}))}return Object(c.useEffect)((function(){var e;(e=n.token,f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(re.USER_PHARMACY,{method:"GET",headers:ce(e)}).then(se));case 1:case"end":return t.stop()}}),null,null,null,Promise)).then((function(e){l(e)})),oe().then(m)}),[]),s.a.createElement(h.a,{style:[Re.container,t]},s.a.createElement(y.a,{style:Re.panelTitle},"Mi farmacia"),s.a.createElement(h.a,{style:Re.itemsContainer},a&&p.map((function(e,t){var n=a.products.some((function(t){return t.id===e.id}));return s.a.createElement(g.a,{key:e.id,onPress:function(){return b(e)},style:[Re.productButton,{backgroundColor:n?de[4]:de[0]}]},we[e.photo]?s.a.createElement(v.a,{style:Re.productButtonImg,source:we[e.photo],accessibilityLabel:e.name}):s.a.createElement(y.a,{style:Re.productButtonText},e.name))}))),a&&s.a.createElement(h.a,{style:Re.stats},s.a.createElement(y.a,{style:Re.pharmacyName},a.name),s.a.createElement(y.a,{style:Re.pharmacyAddress},a.address),s.a.createElement(y.a,{style:Re.statsText},"Actualizaste el inventario "+function(e){switch(typeof e){case"number":break;case"string":e=+new Date(e);break;case"object":e.constructor===Date&&(e=e.getTime());break;default:e=+new Date}var t=[[60,"segundos",1],[120,"minuto",60],[3600,"minutos",60],[7200,"hora",3600],[86400,"horas",3600],[172800,"ayer","hoy"],[604800,"dias",86400],[1209600,"la \xfaltima semana","la pr\xf3xima semana"],[2419200,"semanas",604800],[4838400,"el \xfaltimo mes","el pr\xf3ximo mes"],[29030400,"meses",2419200],[58060800,"el \xfaltimo a\xf1o","el pr\xf3ximo a\xf1o"],[290304e4,"a\xf1os",29030400],[580608e4,"el \xfaltimo centenario","el pr\xf3ximo centenario"],[580608e5,"centenarios",290304e4]],n=(+new Date-e)/1e3,r="hace ",o=1;if(n<1)return"justo ahora";n<0&&(n=Math.abs(n),r="siguientes",o=2);for(var a,i=0;a=t[i++];)if(n<a[0])return"string"==typeof a[2]?a[o]:r+Math.floor(n/a[2])+" "+a[1];return e}(new Date(a.updatedAt)))))}var Re=m.a.create({container:{backgroundColor:"white",paddingHorizontal:8,paddingVertical:8},panelTitle:{fontSize:14,alignSelf:"center",textTransform:"uppercase",marginBottom:8,fontWeight:"bold"},itemsContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:8,paddingVertical:8},productButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:50,marginRight:8,marginBottom:4,padding:8,flexDirection:"row",shadowColor:"black",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22,elevation:3},productButtonText:{color:"white"},productButtonImg:{width:42,height:42},tabText:{fontSize:24,flexShrink:1,flexWrap:"wrap"},tabSlider:{padding:8},stats:{display:"flex",width:"100%",padding:8,paddingRight:16},pharmacyName:{textAlign:"right",textTransform:"uppercase",fontWeight:"bold",color:Ee,fontSize:12},pharmacyAddress:{textAlign:"right",textTransform:"capitalize",color:Ae,fontSize:12,marginBottom:8},statsText:{textAlign:"right",color:"gray",fontSize:10,flexWrap:"nowrap"}}),Te=n(641),Ie=.5*Math.round(w.a.get("window").width);function Be(e){var t=e.navigation,n=Object(c.useState)([]),r=i()(n,2),o=r[0],a=r[1],l=Object(c.useState)(!1),u=i()(l,2),d=u[0],p=u[1],m=Object(c.useState)([]),w=i()(m,2),S=w[0],E=w[1],A=Object(c.useState)(),x=i()(A,2),j=x[0],P=x[1],R=Object(c.useState)(null),T=i()(R,2),I=(T[0],T[1]),B=Object(c.useState)([]),k=i()(B,2),D=k[0],M=k[1],H=Object(c.useState)(null),L=i()(H,2),z=L[0],U=L[1],V=Object(c.useState)(),G=i()(V,2),W=G[0],Q=G[1],X=ue(),K=X.user,J=X.logout,Y=Object(c.useRef)(null),Z=Boolean(K&&K.email),_=Z;function $(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return p(!0),n.next=3,f.a.awrap(O.c());case 3:return e=n.sent,"granted"!==e.status&&console.warn("Permission to access location was denied"),n.next=8,f.a.awrap(O.b({accuracy:O.a.BestForNavigation}));case 8:t=n.sent,I(t.coords),Y.current.animateToRegion({latitude:t.coords.latitude,latitudeDelta:.026006060443698686,longitude:t.coords.longitude,longitudeDelta:.017766952514648438}),p(!1);case 12:case"end":return n.stop()}}),null,null,null,Promise)}function te(e){return e.products.some((function(e){return e.id===z.id}))?"green":"red"}function ne(e,t){var n=e.products.map((function(e){return e.id}));return n&&n.some((function(e){return e===t.id}))}Object(c.useEffect)((function(){p(!0),ae().then((function(e){var t=e.map((function(e){return{value:e,name:e}}));a(t),p(!1)})).catch((function(e){console.error(e),p(!1)}))}),[]),Object(c.useEffect)((function(){j&&(p(!0),ie({areas:j}).then((function(e){E(e),p(!1)})).catch((function(e){console.error(e),p(!1)})))}),[j]),Object(c.useEffect)((function(){p(!0),oe().then((function(e){M(e),U(e[0]),p(!1)}))}),[]);C.a.OS;return s.a.createElement(h.a,{style:ke.container},s.a.createElement(q,{ref:Y,style:[ke.map,{height:"100%"}],provider:"google",showsUserLocation:!0,onMapReady:$},S.map((function(e){return s.a.createElement(F,{key:e.id,tracksViewChanges:!1,coordinate:{latitude:parseFloat(e.geometryLat),longitude:parseFloat(e.geometryLng)},title:e.name,description:e.address,pinColor:te(e),onPress:function(){return Q(e.id)}},function(e){return"web"!==C.a.OS||W===e.id}(e)&&s.a.createElement(N,{onPress:function(){return t=function(e){return encodeURI("https://www.google.com/maps/search/?api=1&query="+e.address+","+e.areas)}(e),p(!0),void Te.a.canOpenURL(t).then((function(e){e&&Te.a.openURL(t).then((function(){return p(!1)}))}));var t}},s.a.createElement(h.a,{style:ke.callout},s.a.createElement(h.a,{style:ke.imageArea},D.map((function(t){return s.a.createElement(h.a,{key:t.id,style:[ke.logoArea,{backgroundColor:ne(e,t)?de[4]:de[0]}]},s.a.createElement(v.a,{key:t.id,source:we[t.photo],style:ke.productsImageCallout}))}))),s.a.createElement(h.a,{style:ke.textAreaStyle},s.a.createElement(y.a,{style:{textTransform:"capitalize"}},"Farmacia "+e.name),s.a.createElement(y.a,{style:{color:"blue"}},"C\xf3mo llegar")))))}))),s.a.createElement(ee,{select:!0,inputHeight:36,onItemSelect:function(e){return P(e.value)},containerStyle:ke.provincesSelector,itemStyle:ke.dropdownItem,itemsContainerStyle:ke.itemsContainer,items:o,textInputProps:{placeholder:"Selecciona tu ciudad",style:ke.formInput},listProps:{nestedScrollEnabled:!0}}),Z?s.a.createElement(g.a,{style:ke.loginButton,onPress:J},s.a.createElement(y.a,null,"Cerrar sesi\xf3n")):s.a.createElement(g.a,{style:ke.loginButton,onPress:function(){return t.navigate("Login")}},s.a.createElement(y.a,null,"Entrar")),_&&s.a.createElement(Pe,{style:ke.bottomBar}),s.a.createElement(g.a,{style:[ke.compassButton,{bottom:_?220:24}],onPress:$},s.a.createElement(v.a,{source:we.compass,style:ke.compassButtonImage})),s.a.createElement(g.a,{style:[ke.productsButton,{bottom:_?288:92}],onPress:function(){var e=D.findIndex((function(e){return e.id===z.id}));e===D.length-1?U(D[0]):U(D[e+1])}},z&&s.a.createElement(v.a,{source:we[z.photo],style:ke.productsButtonImage})),d&&s.a.createElement(h.a,{style:ke.loadingContainer},s.a.createElement(b.a,null)))}var ke=m.a.create({container:{display:"flex",height:"100%",width:"100%",flexDirection:"column",backgroundColor:"#F5F5F5",alignItems:"center",justifyContent:"center"},map:{width:"100%",height:"100%"},loginButton:{position:"absolute",backgroundColor:"white",borderRadius:5,alignContent:"center",justifyContent:"center",paddingVertical:8,paddingHorizontal:16,right:24,top:24,height:36},provincesSelector:{position:"absolute",left:22,top:24,width:200,maxWidth:250,maxHeight:400,backgroundColor:"white",borderRadius:5,alignContent:"center",justifyContent:"center",overflow:"hidden"},dropdownItem:{padding:10,marginTop:2,backgroundColor:"white",borderBottomWidth:1,borderBottomColor:"transparent"},itemsContainer:{maxHeight:140,borderRadius:5},formInput:{width:"100%",backgroundColor:"white",borderRadius:5,paddingVertical:8,paddingHorizontal:16},bottomBar:{position:"absolute",right:16,bottom:16,maxWidth:"95%",minWidth:288,borderRadius:10,shadowColor:xe,shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22,elevation:4},loadingContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"white",opacity:.5},callout:{padding:4,display:"flex",justifyContent:"center",maxWidth:Ie},imageArea:{display:"flex",flexDirection:"row",justifyContent:"center",padding:4},logoArea:{borderRadius:50,padding:4,marginRight:4},textAreaStyle:{padding:4,marginBottom:6},productsImageCallout:{width:32,height:32},productsButton:{position:"absolute",right:12,backgroundColor:Se,display:"flex",justifyContent:"center",alignContent:"center",borderRadius:50,padding:8,shadowColor:xe,shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22,elevation:3},productsButtonImage:{width:42,height:42},compassButton:{display:"flex",backgroundColor:je,borderRadius:50,padding:16,position:"absolute",right:12,shadowColor:xe,shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22,elevation:3},compassButtonImage:{height:26,width:26}}),De=n(48),Me="user";function He(e){var t=e.navigation,n=Object(c.useState)(""),r=i()(n,2),o=r[0],a=r[1],u=Object(c.useState)(""),d=i()(u,2),p=d[0],m=d[1],b=ue().setUser;return s.a.createElement(h.a,{style:Le.container},s.a.createElement(y.a,{style:Le.formTitle},"Acceso a personal de farmacia"),s.a.createElement(De.a,{style:Le.formInput,placeholder:"Email",autoCompleteType:"email",keyboardType:"email-address",textContentType:"emailAddress",onChangeText:function(e){return a(e)},defaultValue:o,autoCapitalize:"none"}),s.a.createElement(De.a,{style:Le.formInput,placeholder:"Contrase\xf1a",autoCompleteType:"password",textContentType:"password",secureTextEntry:!0,onChangeText:function(e){return m(e)},defaultValue:p,autoCapitalize:"none"}),s.a.createElement(y.a,{style:Le.formLink,onPress:function(){return t.navigate("Registro")}},"Tengo una farmacia y no tengo cuenta, \xbfC\xf3mo me registro?"),s.a.createElement(g.a,{style:Le.loginButton,onPress:function(){(function(e,t){var n,r;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n={email:e,password:t},r={method:"POST",headers:ce(),body:JSON.stringify(n)},o.abrupt("return",fetch(re.LOGIN,r).then((function(e){return e.json()})));case 3:case"end":return o.stop()}}),null,null,null,Promise)})(o,p).then((function(e){return l.a.setItem(Me,JSON.stringify(e)).then((function(){return e}))})).then((function(e){if(!e||!e.token)throw new Error("The token is missing in the user information "+JSON.stringify(e));Oe("Hola de nuevo, "+e.name+",\n              Nunca podremos agradecer suficiente lo que est\xe1s haciendo durante esta crisis por nosotros. \n\n \xa1Venceremos al virus!"),b(e),t.navigate("Inicio")})).catch((function(e){console.warn(e),Oe("Fallo al iniciar sesi\xf3n:\n\n Los credenciales son err\xf3neos o el usuario est\xe1 pendiente de validaci\xf3n")}))}},s.a.createElement(y.a,null,"Login")))}var Le=m.a.create({container:{position:"relative",display:"flex",alignSelf:"center",flex:1,width:"web"===C.a.OS?"":"100%",justifyContent:"center",alignItems:"center",backgroundColor:"#F5F5F5",paddingHorizontal:48},formTitle:{fontSize:24,marginBottom:32},formInput:{width:"100%",height:48,marginBottom:16,backgroundColor:"white",borderRadius:5,paddingVertical:8,paddingHorizontal:16},formLink:{textDecorationLine:"underline",marginBottom:16},loginButton:{backgroundColor:"white",borderRadius:5,borderColor:"#F5F5F5",borderWidth:1,alignContent:"center",justifyContent:"center",paddingVertical:8,paddingHorizontal:16}});function ze(e){var t=e.navigation,n=Object(c.useState)([]),r=i()(n,2),o=r[0],a=r[1],l=Object(c.useState)([]),u=i()(l,2),d=u[0],p=u[1],m=Object(c.useState)(!1),b=i()(m,2),v=b[0],w=b[1],C=Object(c.useState)(null),O=i()(C,2),S=O[0],E=O[1],A=Object(c.useState)(null),x=i()(A,2),j=x[0],P=x[1],R=Object(c.useState)(""),T=i()(R,2),I=T[0],B=T[1],k=Object(c.useState)(""),D=i()(k,2),M=D[0],H=D[1],L=Object(c.useState)(""),z=i()(L,2),F=z[0],U=z[1],V=Object(c.useState)(""),G=i()(V,2),N=G[0],W=G[1];return Object(c.useEffect)((function(){w(!0),ae().then((function(e){var t=e.map((function(e){return{value:e,name:e}}));a(t),w(!1)})).catch((function(e){w(!1)}))}),[]),Object(c.useEffect)((function(){S&&(w(!0),ie({areas:S}).then((function(e){var t=e.map((function(e){return{value:e.id,name:e.name}}));p(t),w(!1)})).catch((function(e){w(!1)})))}),[S]),s.a.createElement(h.a,{style:Fe.container},s.a.createElement(y.a,{style:Fe.formTitle},"Pedir acceso como personal de farmacia"),s.a.createElement(y.a,{style:Fe.formSubtitle},"Por el momento, solo un usuario por farmacia podr\xe1 informar del inventario de productos."),s.a.createElement(ee,{select:!0,inputHeight:48,onItemSelect:function(e){E(e.value)},containerStyle:Fe.searchInput,itemStyle:Fe.dropdownItem,itemsContainerStyle:Fe.itemsContainer,items:o,textInputProps:{placeholder:v?"Cargando...":"Selecciona una ciudad",style:Fe.formInput},listProps:{nestedScrollEnabled:!0}}),s.a.createElement(ee,{select:!0,inputHeight:48,disabled:!S,onItemSelect:function(e){P(e.value)},containerStyle:Fe.searchInput,itemStyle:Fe.dropdownItem,itemsContainerStyle:Fe.itemsContainer,items:d,textInputProps:{placeholder:v?"Cargando...":"Selecciona tu farmacia",style:Fe.formInput},listProps:{nestedScrollEnabled:!0}}),s.a.createElement(De.a,{style:Fe.formInput,placeholder:"C\xf3digo Auton\xf3mico Ej: F08006281",onChangeText:W,defaultValue:N}),s.a.createElement(De.a,{style:Fe.formInput,placeholder:"Nombre y Apellidos",autoCompleteType:"name",onChangeText:B,defaultValue:I}),s.a.createElement(De.a,{style:Fe.formInput,placeholder:"Email",autoCompleteType:"email",keyboardType:"email-address",textContentType:"emailAddress",onChangeText:H,defaultValue:M,autoCapitalize:"none"}),s.a.createElement(De.a,{style:Fe.formInput,placeholder:"Contrase\xf1a",autoCompleteType:"password",textContentType:"password",secureTextEntry:!0,onChangeText:U,defaultValue:F,autoCapitalize:"none"}),s.a.createElement(g.a,{style:Fe.loginButton,onPress:function(){(function(){if(j)if(N)if(I)if(M){if(F)return!0;Oe("Los datos no son v\xe1lidos","Por favor, introduce una contrase\xf1a")}else Oe("Los datos no son v\xe1lidos","Por favor, introduce un email");else Oe("Los datos no son validos","Por favor, introduce tu nombre y tus apellidos");else Oe("Los datos no son v\xe1lidos","Por favor, introduce el c\xf3digo auton\xf3mico de la farmacia");else Oe("Los datos no son v\xe1lidos","Por favor, selecciona tu farmacia")})()&&function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={name:e.name,email:e.email,password:e.password,centerCode:e.centerCode,pharmacyId:e.pharmacyId},n.abrupt("return",fetch(re.USER_PHARMACY,{method:"POST",headers:ce(),body:JSON.stringify(t)}).then(se));case 2:case"end":return n.stop()}}),null,null,null,Promise)}({name:I,email:M,password:F,centerCode:N,pharmacyId:j}).then((function(e){Oe("Enviado correctamente","Gracias "+e.name+". Ya puedes iniciar sesi\xf3n y actualizar el inventario de tu farmacia.",[{text:"Aceptar",onPress:function(){t.navigate("Login")}}],{cancelable:!1})})).catch((function(e){Oe("Ha ocurrido un error",String(e))}))}},s.a.createElement(y.a,null,"Pedir acceso")))}var Fe=m.a.create({container:{position:"relative",display:"flex",flex:1,justifyContent:"center",alignItems:"center",alignSelf:"center",padding:48,maxWidth:600,backgroundColor:"#F5F5F5"},formTitle:{fontSize:24,marginBottom:24},formSubtitle:{marginBottom:16},formInput:{height:48,width:"100%",marginBottom:16,backgroundColor:"white",borderRadius:5,paddingVertical:8,paddingHorizontal:16},searchInput:{width:"100%",marginBottom:16},dropdownItem:{padding:10,marginTop:2,backgroundColor:"white",borderBottomWidth:1,borderBottomColor:"transparent"},itemsContainer:{maxHeight:140,marginTop:-14,marginBottom:8,borderRadius:5,zIndex:1},formLink:{textDecorationLine:"underline"},loginButton:{backgroundColor:"white",borderRadius:5,borderColor:"#F5F5F5",borderWidth:1,alignContent:"center",justifyContent:"center",paddingVertical:8,paddingHorizontal:16}}),Ue=n(640);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return Ne}));var Ge=Object(Ue.a)();function Ne(){var e=Object(c.useState)({email:"",name:"",hospitalId:0}),t=i()(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){l.a.getItem(Me).then((function(e){var t=e&&JSON.parse(e);r(t)}))}),[]);var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.a,{colors:{primary:"rgb(255, 45, 85)",background:"#F5F5F5",card:"rgb(255, 255, 255)",text:"rgb(28, 28, 30)",border:"transparent"}});return s.a.createElement(le.Provider,{value:{user:n,setUser:r,logout:function(){l.a.removeItem(Me).then((function(){return r({email:"",name:"",hospitalId:0})}))}}},s.a.createElement(d.a,{theme:a},s.a.createElement(Ge.Navigator,null,s.a.createElement(Ge.Screen,{name:"Inicio",component:Be}),s.a.createElement(Ge.Screen,{name:"Login",component:He}),s.a.createElement(Ge.Screen,{name:"Registro",component:ze}))))}},357:function(e,t,n){n(358),e.exports=n(626)},358:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[357,1,2]]]);
//# sourceMappingURL=app.2174c062.chunk.js.map