(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{339:function(e,t,n){e.exports=n.p+"static/media/faceMask.20888871.png"},340:function(e,t,n){e.exports=n.p+"static/media/handSanitizer.ce9c49cf.png"},341:function(e,t,n){e.exports=n.p+"static/media/gloves.2767eaf0.png"},342:function(e,t,n){e.exports=n.p+"static/media/compass.971d8ea6.png"},350:function(e,t,n){"use strict";var r=n(6),o=n.n(r),a=n(22),i=n.n(a),c=(n(46),n(0)),s=n.n(c),l=n(141),u=n(109),d=n(314),p=n(9),f=n.n(p),m=n(4),h=n(3),g=n(51),y=n(43),b=n(344),v=n(72),C=n(69),O=n(13),w=n(189),E=n(8),S=n.n(E),j=n(10),P=n.n(j),x=n(11),I=n.n(x),R=n(12),k=n.n(R),T=n(2),D=n.n(T),B=n(23),A=n.n(B),F=n(83),z=n(29),H=n.n(z);function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=function(e){I()(r,e);var t,n=(t=r,function(){var e,n=D()(t);if(M()){var r=D()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k()(this,e)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"render",value:function(){var e=this.props,t=e.description,n=e.title,r=e.coordinate,o=e.children,a=e.onPress,i=(e.pinColor,H()(e,["description","title","coordinate","children","onPress","pinColor"]));return s.a.createElement(F.Marker,A()({},i,{onClick:a,title:t?n+"\n"+t:n,position:{lat:r.latitude,lng:r.longitude},icon:url}),o)}}]),r}(c.Component);function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var V=function(e){I()(r,e);var t,n=(t=r,function(){var e,n=D()(t);if(U()){var r=D()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k()(this,e)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"render",value:function(){return s.a.createElement(F.Polyline,this.props)}}]),r}(c.Component);function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var W=function(e){I()(r,e);var t,n=(t=r,function(){var e,n=D()(t);if(N()){var r=D()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k()(this,e)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"render",value:function(){var e=this.props,t=e.onPress,n=H()(e,["onPress"]);return s.a.createElement(g.a,{onPress:t},s.a.createElement(F.InfoWindow,A()({onCloseClick:this.props.hideCallout},n),this.props.children))}}]),r}(c.Component);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _=Object(F.withGoogleMap)((function(e){return s.a.createElement(F.GoogleMap,A()({},e,{ref:e.handleMapMounted}))})),q=function(e){I()(r,e);var t,n=(t=r,function(){var e,n=D()(t);if(Y()){var r=D()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k()(this,e)});function r(){var e;S()(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).state={center:null},e.handleMapMounted=function(t){e.map=t,e.props.onMapReady&&e.props.onMapReady()},e.onDragEnd=function(){var t=e.props.onRegionChangeComplete;if(e.map&&t){var n=e.map.getCenter();t({latitude:n.lat(),longitude:n.lng()})}},e}return P()(r,[{key:"animateToRegion",value:function(e){this.setState({center:{lat:e.latitude,lng:e.longitude}})}},{key:"render",value:function(){var e=this.props,t=e.region,n=e.initialRegion,r=e.onRegionChange,o=e.onPress,a=e.options,i=this.state.center,c=this.props.style||K.container,l=t?{center:{lat:t.latitude,lng:t.longitude}}:i?{center:i}:{defaultCenter:{lat:n&&n.latitude,lng:n&&n.longitude}};return s.a.createElement(h.a,{style:c},s.a.createElement(_,A()({handleMapMounted:this.handleMapMounted,containerElement:s.a.createElement("div",{style:{height:"100%"}}),mapElement:s.a.createElement("div",{style:{height:"100%"}})},l,{onDragStart:r,onIdle:this.onDragEnd,defaultZoom:15,onClick:o,options:J({fullscreenControl:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}},a)}),this.props.children))}}]),r}(c.Component);q.Marker=L,q.Polyline=V,q.Callout=W;var K=m.a.create({container:{height:"100%"}}),Z=q,Q=n(334);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){var t=e.containerStyle,n=e.items,r=e.onItemSelect,o=e.textInputProps,a=e.inputHeight,i=n.map((function(e){return{label:e.name,value:e.value}}));return s.a.createElement(h.a,{style:[t,{overflow:"visible"}]},s.a.createElement(Q.Select,{isClearable:!1,optionHeight:36,theme:function(e){return $({},e,{borderRadius:10,colors:$({},e.colors,{primary25:"#4C9AFF",primary:"#4C9AFF"}),spacing:$({},e.spacing,{controlHeight:a,menuGlutter:0})})},styles:{container:function(e,t){return $({},e,{fontSize:14,border:"none",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", sans-serif'})},control:function(e,t){return $({},e,{border:"none",minHeight:a,zIndex:0})},menu:function(e,t){return $({},e,{zIndex:9999})}},isSearchable:!0,autoFocus:!0,name:"city",placeholder:o&&o.placeholder,options:i,onChange:function(e){var t=e.label,n=e.value;return r({name:t,value:n})}}))}var te=n(602),ne="https://covid-19-hospital-finder.herokuapp.com",re={HOSPITALS:ne+"/hospitals",USERS:ne+"/users",LOGIN:ne+"/login",VOTE:ne+"/score",PRODUCTS:ne+"/products",PROVINCES:ne+"/provinces/areas",USER_PHARMACY:ne+"/user/pharmacy",PHARMACY_STOCK:ne+"/user/pharmacy/stock",PHARMACIES:ne+"/pharmacies"};function oe(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(re.PRODUCTS,{method:"GET",headers:ce()}).then(se));case 1:case"end":return e.stop()}}),null,null,null,Promise)}function ae(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(re.PROVINCES,{method:"GET",headers:ce()}).then(se));case 1:case"end":return e.stop()}}),null,null,null,Promise)}function ie(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=te.stringify(e),n.abrupt("return",fetch(re.PHARMACIES+"?"+t,{method:"GET",headers:ce()}).then(se));case 2:case"end":return n.stop()}}),null,null,null,Promise)}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{"Content-Type":"application/json",Authorization:e?"Bearer "+e:void 0}}function se(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(e.json());case 2:if(!(t=n.sent).error){n.next=5;break}throw Error(t.error);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,null,null,Promise)}var le=Object(c.createContext)({user:{email:"",name:"",hospitalId:0},setUser:function(e){return e},logout:function(){return null}});var ue=function(){return Object(c.useContext)(le)},de=["#cc3232","#db7b2b","#e7b416","#99c140","#2dc937"],pe=n(339),fe=n.n(pe),me=n(340),he=n.n(me),ge=n(341),ye=n.n(ge),be=n(342),ve=n.n(be),Ce={mask:fe.a,handSanitizer:he.a,gloves:ye.a,compass:ve.a},Oe=n(233);function we(){for(var e="web"!==O.a.OS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e?Oe.a.alert.apply(Oe.a,n):alert(n.join("\n\n"))}function Ee(e){var t=e.style,n=ue().user,r=Object(c.useState)(null),o=i()(r,2),a=o[0],l=o[1],u=Object(c.useState)([]),d=i()(u,2),p=d[0],m=d[1];function b(e){var t=a.products.some((function(t){return t.id===e.id}));(function(e,t,n){var r,o;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r={productId:t,stock:n},o={method:"PUT",headers:ce(e),body:JSON.stringify(r)},a.abrupt("return",fetch(re.PHARMACY_STOCK,o).then(se));case 3:case"end":return a.stop()}}),null,null,null,Promise)})(n.token,e.id,!t).then(l).catch((function(e){return we("Error actualizando el stock",String(e))}))}return Object(c.useEffect)((function(){var e;(e=n.token,f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(re.USER_PHARMACY,{method:"GET",headers:ce(e)}).then(se));case 1:case"end":return t.stop()}}),null,null,null,Promise)).then((function(e){l(e)})),oe().then(m)}),[]),s.a.createElement(h.a,{style:[Se.container,t]},s.a.createElement(h.a,{style:Se.itemsContainer},a&&p.map((function(e,t){var n=a.products.some((function(t){return t.id===e.id}));return s.a.createElement(g.a,{key:e.id,onPress:function(){return b(e)},style:[Se.productButton,{backgroundColor:n?de[4]:de[0]}]},Ce[e.photo]?s.a.createElement(v.a,{style:Se.productButtonImg,source:Ce[e.photo],accessibilityLabel:e.name}):s.a.createElement(y.a,{style:Se.productButtonText},e.name))}))),a&&s.a.createElement(h.a,{style:Se.stats},s.a.createElement(y.a,{style:Se.lastUpdate},"Actualizaste el inventario "+function(e){switch(typeof e){case"number":break;case"string":e=+new Date(e);break;case"object":e.constructor===Date&&(e=e.getTime());break;default:e=+new Date}var t=[[60,"segundos",1],[120,"minuto",60],[3600,"minutos",60],[7200,"hora",3600],[86400,"horas",3600],[172800,"ayer","hoy"],[604800,"dias",86400],[1209600,"\xfaltima semana","pr\xf3xima semana"],[2419200,"semanas",604800],[4838400,"\xfaltimo mes","pr\xf3ximo mes"],[29030400,"meses",2419200],[58060800,"\xfaltimo a\xf1o","pr\xf3ximo year"],[290304e4,"a\xf1os",29030400],[580608e4,"\xfaltimo centenario","pr\xf3ximo centenario"],[580608e5,"centenarios",290304e4]],n=(+new Date-e)/1e3,r="hace ",o=1;if(n<1)return"justo ahora";n<0&&(n=Math.abs(n),r="siguientes",o=2);for(var a,i=0;a=t[i++];)if(n<a[0])return"string"==typeof a[2]?a[o]:r+Math.floor(n/a[2])+" "+a[1]+" ";return e}(new Date(a.updatedAt)))))}var Se=m.a.create({container:{backgroundColor:"white"},itemsContainer:{display:"flex",flexDirection:"row",height:"50%",justifyContent:"space-between",padding:16,flexWrap:"wrap"},productButton:{alignItems:"center",justifyContent:"center",borderRadius:10,marginRight:4,marginBottom:4,padding:8},productButtonText:{color:"white"},productButtonImg:{width:48,height:48},tabText:{fontSize:24},tabSlider:{padding:8},stats:{display:"flex",flexDirection:"row",padding:8,alignItems:"center"},lastUpdate:{flex:1,paddingHorizontal:16,width:"50%",textAlign:"right",color:"gray",fontSize:12},capacity:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"baseline",flex:1,textTransform:"uppercase",width:"50%",textAlign:"center",fontSize:40},capacityValue:{fontSize:40,marginRight:8},capacityLabel:{fontSize:12}}),je=n(641);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xe=.5*Math.round(C.a.get("window").width);function Ie(e){var t=e.navigation,n=Object(c.useState)([]),r=i()(n,2),o=r[0],a=r[1],l=Object(c.useState)(!1),u=i()(l,2),d=u[0],p=u[1],m=Object(c.useState)([]),C=i()(m,2),E=C[0],S=C[1],j=Object(c.useState)(),P=i()(j,2),x=P[0],I=P[1],R=Object(c.useState)(null),k=i()(R,2),T=(k[0],k[1]),D=Object(c.useState)([]),B=i()(D,2),A=B[0],F=B[1],z=Object(c.useState)(null),H=i()(z,2),M=H[0],U=H[1],V=Object(c.useState)(),N=i()(V,2),G=N[0],J=N[1],Y=ue(),_=Y.user,q=Y.logout,K=Object(c.useRef)(null),Q=Boolean(_&&_.email),X=Q;function $(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return p(!0),n.next=3,f.a.awrap(w.c());case 3:return e=n.sent,"granted"!==e.status&&console.warn("Permission to access location was denied"),n.next=8,f.a.awrap(w.b({accuracy:w.a.BestForNavigation}));case 8:t=n.sent,T(t.coords),K.current.animateToRegion({latitude:t.coords.latitude,latitudeDelta:.026006060443698686,longitude:t.coords.longitude,longitudeDelta:.017766952514648438}),p(!1);case 12:case"end":return n.stop()}}),null,null,null,Promise)}function te(e){return e.products.some((function(e){return e.id===M.id}))?"green":"red"}function ne(e,t){var n=e.products.map((function(e){return e.id}));return n&&n.some((function(e){return e===t.id}))}Object(c.useEffect)((function(){p(!0),ae().then((function(e){var t=e.map((function(e){return{value:e,name:e}}));a(t),p(!1)})).catch((function(e){console.error(e),p(!1)}))}),[]),Object(c.useEffect)((function(){x&&(p(!0),ie({areas:x}).then((function(e){S(e),p(!1)})).catch((function(e){console.error(e),p(!1)})))}),[x]),Object(c.useEffect)((function(){p(!0),oe().then((function(e){F(e),U(e[0]),p(!1)}))}),[]);var re="web"===O.a.OS;return s.a.createElement(h.a,{style:Re.container},s.a.createElement(Z,{ref:K,style:[Re.map,{height:X?"80%":"100%"}],provider:"google",showsUserLocation:!0,showsMyLocationButton:!0,showsCompass:!0,onMapReady:$},E.map((function(e){return s.a.createElement(L,{key:e.id,tracksViewChanges:!1,coordinate:{latitude:parseFloat(e.geometryLat),longitude:parseFloat(e.geometryLng)},title:e.name,description:e.address,pinColor:te(e),onPress:function(){return J(e.id)}},function(e){return"web"!==O.a.OS||G===e.id}(e)&&s.a.createElement(W,{onPress:function(){return function(e){p(!0),je.a.canOpenURL(e).then((function(t){t&&je.a.openURL(e).then((function(){return p(!1)}))}))}(function(e){return encodeURI("https://www.google.com/maps/search/?api=1&query="+e.address+","+e.areas)}(e))}},s.a.createElement(h.a,{style:Re.callout},s.a.createElement(h.a,{style:Re.imageArea},A.map((function(t){return s.a.createElement(h.a,{key:t.id,style:[Re.logoArea,{backgroundColor:ne(e,t)?de[4]:de[0]}]},s.a.createElement(v.a,{key:t.id,source:Ce[t.photo],style:Re.productsImageCallout}))}))),s.a.createElement(h.a,{style:Re.textAreaStyle},s.a.createElement(y.a,{style:{textTransform:"capitalize"}},"Farmacia "+e.name),s.a.createElement(y.a,{style:{color:"blue"}},"C\xf3mo llegar")))))}))),s.a.createElement(ee,{select:!0,inputHeight:36,onItemSelect:function(e){return I(e.value)},containerStyle:Re.provincesSelector,itemStyle:Re.dropdownItem,itemsContainerStyle:Re.itemsContainer,items:o,textInputProps:{placeholder:"Selecciona tu ciudad",style:Re.formInput},listProps:{nestedScrollEnabled:!0}}),Q?s.a.createElement(g.a,{style:Re.loginButton,onPress:q},s.a.createElement(y.a,null,"Cerrar sesi\xf3n")):s.a.createElement(g.a,{style:Re.loginButton,onPress:function(){return t.navigate("Login")}},s.a.createElement(y.a,null,"Entrar")),X&&s.a.createElement(Ee,{style:Re.bottomBar}),re&&s.a.createElement(g.a,{style:Re.positionButton,onPress:function(){$()}},s.a.createElement(v.a,{source:Ce.compass,style:{height:40,width:40}})),s.a.createElement(g.a,{style:[Re.productsButton,{bottom:X?"30%":Re.productsButton.bottom}],onPress:function(){var e=A.findIndex((function(e){return e.id===M.id}));e===A.length-1?U(A[0]):U(A[e+1])}},M&&s.a.createElement(v.a,{source:Ce[M.photo],style:Re.productsButtonImage})),d&&s.a.createElement(h.a,{style:Re.loadingContainer},s.a.createElement(b.a,null)))}var Re=m.a.create({container:{display:"flex",height:"100%",width:"100%",flexDirection:"column",backgroundColor:"#F5F5F5",alignItems:"center",justifyContent:"center"},map:{width:"100%",height:"100%"},loginButton:{position:"absolute",backgroundColor:"white",borderRadius:5,alignContent:"center",justifyContent:"center",paddingVertical:8,paddingHorizontal:16,right:24,top:24,height:36},provincesSelector:{position:"absolute",left:22,top:24,width:200,maxWidth:250,maxHeight:400,backgroundColor:"white",borderRadius:10,alignContent:"center",justifyContent:"center",overflow:"hidden"},dropdownItem:{padding:10,marginTop:2,backgroundColor:"white",borderBottomWidth:1,borderBottomColor:"transparent"},itemsContainer:{maxHeight:140,borderRadius:10},formInput:{width:"100%",backgroundColor:"white",borderRadius:10,paddingVertical:8,paddingHorizontal:16},bottomBar:{height:"20%",maxHeight:"20%",overflow:"hidden",width:"100%"},loadingContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"white",opacity:.5},productsButton:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},O.a.select({ios:{bottom:"15%"},android:{bottom:"8%"},web:{bottom:"10%",backgroundColor:"red"}}),{right:"2.5%",backgroundColor:"rgb(0, 150, 135)",display:"flex",justifyContent:"center",alignContent:"center",borderRadius:50,padding:4}),productsButtonImage:{width:48,height:48},callout:{padding:4,display:"flex",justifyContent:"center",maxWidth:xe},imageArea:{display:"flex",flexDirection:"row",justifyContent:"center",padding:4},logoArea:{borderRadius:50,padding:4,marginRight:4},textAreaStyle:{padding:4,marginBottom:6},productsImageCallout:{width:32,height:32},positionButton:{display:"flex",backgroundColor:"white",borderRadius:50,padding:4,position:"absolute",right:"1%",bottom:"12%"}}),ke=n(48),Te="user";function De(e){var t=e.navigation,n=Object(c.useState)(""),r=i()(n,2),o=r[0],a=r[1],u=Object(c.useState)(""),d=i()(u,2),p=d[0],m=d[1],b=ue().setUser;return s.a.createElement(h.a,{style:Be.container},s.a.createElement(y.a,{style:Be.formTitle},"Acceso a personal de farmacia"),s.a.createElement(ke.a,{style:Be.formInput,placeholder:"Email",autoCompleteType:"email",keyboardType:"email-address",textContentType:"emailAddress",onChangeText:function(e){return a(e)},defaultValue:o,autoCapitalize:"none"}),s.a.createElement(ke.a,{style:Be.formInput,placeholder:"Contrase\xf1a",autoCompleteType:"password",textContentType:"password",secureTextEntry:!0,onChangeText:function(e){return m(e)},defaultValue:p,autoCapitalize:"none"}),s.a.createElement(y.a,{style:Be.formLink,onPress:function(){return t.navigate("Registro")}},"Tengo una farmacia y no tengo cuenta, \xbfC\xf3mo me registro?"),s.a.createElement(g.a,{style:Be.loginButton,onPress:function(){(function(e,t){var n,r;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n={email:e,password:t},r={method:"POST",headers:ce(),body:JSON.stringify(n)},o.abrupt("return",fetch(re.LOGIN,r).then((function(e){return e.json()})));case 3:case"end":return o.stop()}}),null,null,null,Promise)})(o,p).then((function(e){return l.a.setItem(Te,JSON.stringify(e)).then((function(){return e}))})).then((function(e){if(!e||!e.token)throw new Error("The token is missing in the user information "+JSON.stringify(e));we("Hola de nuevo, "+e.name+",\n              Nunca podremos agradecer suficiente lo que est\xe1s haciendo durante esta crisis por nosotros. \n\n \xa1Venceremos al virus!"),b(e),t.navigate("Inicio")})).catch((function(e){console.warn(e),we("Fallo al iniciar sesi\xf3n:\n\n Los credenciales son err\xf3neos o el usuario est\xe1 pendiente de validaci\xf3n")}))}},s.a.createElement(y.a,null,"Login")))}var Be=m.a.create({container:{position:"relative",display:"flex",alignSelf:"center",flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#F5F5F5",paddingHorizontal:48},formTitle:{fontSize:24,marginBottom:32},formInput:{width:"100%",height:48,marginBottom:16,backgroundColor:"white",borderRadius:10,paddingVertical:8,paddingHorizontal:16},formLink:{textDecorationLine:"underline",marginBottom:16},loginButton:{backgroundColor:"white",borderRadius:10,borderColor:"#F5F5F5",borderWidth:1,alignContent:"center",justifyContent:"center",paddingVertical:8,paddingHorizontal:16}});function Ae(e){var t=e.navigation,n=Object(c.useState)([]),r=i()(n,2),o=r[0],a=r[1],l=Object(c.useState)([]),u=i()(l,2),d=u[0],p=u[1],m=Object(c.useState)(!1),b=i()(m,2),v=b[0],C=b[1],O=Object(c.useState)(null),w=i()(O,2),E=w[0],S=w[1],j=Object(c.useState)(null),P=i()(j,2),x=P[0],I=P[1],R=Object(c.useState)(""),k=i()(R,2),T=k[0],D=k[1],B=Object(c.useState)(""),A=i()(B,2),F=A[0],z=A[1],H=Object(c.useState)(""),M=i()(H,2),L=M[0],U=M[1],V=Object(c.useState)(""),N=i()(V,2),W=N[0],G=N[1];return Object(c.useEffect)((function(){C(!0),ae().then((function(e){var t=e.map((function(e){return{value:e,name:e}}));a(t),C(!1)})).catch((function(e){C(!1)}))}),[]),Object(c.useEffect)((function(){E&&(C(!0),ie({areas:E}).then((function(e){var t=e.map((function(e){return{value:e.id,name:e.name}}));p(t),C(!1)})).catch((function(e){C(!1)})))}),[E]),s.a.createElement(h.a,{style:Fe.container},s.a.createElement(y.a,{style:Fe.formTitle},"Pedir acceso como personal de farmacia"),s.a.createElement(y.a,{style:Fe.formSubtitle},"Por el momento, solo un usuario por farmacia podr\xe1 informar del inventario de productos."),s.a.createElement(ee,{select:!0,inputHeight:48,onItemSelect:function(e){S(e.value)},containerStyle:Fe.searchInput,itemStyle:Fe.dropdownItem,itemsContainerStyle:Fe.itemsContainer,items:o,textInputProps:{placeholder:v?"Cargando...":"Selecciona una ciudad",style:Fe.formInput},listProps:{nestedScrollEnabled:!0}}),s.a.createElement(ee,{select:!0,inputHeight:48,disabled:!E,onItemSelect:function(e){I(e.value)},containerStyle:Fe.searchInput,itemStyle:Fe.dropdownItem,itemsContainerStyle:Fe.itemsContainer,items:d,textInputProps:{placeholder:v?"Cargando...":"Selecciona tu farmacia",style:Fe.formInput},listProps:{nestedScrollEnabled:!0}}),s.a.createElement(ke.a,{style:Fe.formInput,placeholder:"C\xf3digo Auton\xf3mico Ej: F08006281",onChangeText:G,defaultValue:W}),s.a.createElement(ke.a,{style:Fe.formInput,placeholder:"Nombre y Apellidos",autoCompleteType:"name",onChangeText:D,defaultValue:T}),s.a.createElement(ke.a,{style:Fe.formInput,placeholder:"Email",autoCompleteType:"email",keyboardType:"email-address",textContentType:"emailAddress",onChangeText:z,defaultValue:F,autoCapitalize:"none"}),s.a.createElement(ke.a,{style:Fe.formInput,placeholder:"Contrase\xf1a",autoCompleteType:"password",textContentType:"password",secureTextEntry:!0,onChangeText:U,defaultValue:L,autoCapitalize:"none"}),s.a.createElement(g.a,{style:Fe.loginButton,onPress:function(){(function(){if(x)if(W)if(T)if(F){if(L)return!0;we("Los datos no son v\xe1lidos","Por favor, introduce una contrase\xf1a")}else we("Los datos no son v\xe1lidos","Por favor, introduce un email");else we("Los datos no son validos","Por favor, introduce tu nombre y tus apellidos");else we("Los datos no son v\xe1lidos","Por favor, introduce el c\xf3digo auton\xf3mico de la farmacia");else we("Los datos no son v\xe1lidos","Por favor, selecciona tu farmacia")})()&&function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={name:e.name,email:e.email,password:e.password,centerCode:e.centerCode,pharmacyId:e.pharmacyId},n.abrupt("return",fetch(re.USER_PHARMACY,{method:"POST",headers:ce(),body:JSON.stringify(t)}).then(se));case 2:case"end":return n.stop()}}),null,null,null,Promise)}({name:T,email:F,password:L,centerCode:W,pharmacyId:x}).then((function(e){we("Enviado correctamente","Gracias "+e.name+". Ya puedes iniciar sesi\xf3n y actualizar el inventario de tu farmacia.",[{text:"Aceptar",onPress:function(){t.navigate("Login")}}],{cancelable:!1})})).catch((function(e){we("Ha ocurrido un error",String(e))}))}},s.a.createElement(y.a,null,"Pedir acceso")))}var Fe=m.a.create({container:{position:"relative",display:"flex",flex:1,justifyContent:"center",alignItems:"center",alignSelf:"center",padding:48,maxWidth:600,backgroundColor:"#F5F5F5"},formTitle:{fontSize:24,marginBottom:24},formSubtitle:{marginBottom:16},formInput:{height:48,width:"100%",marginBottom:16,backgroundColor:"white",borderRadius:10,paddingVertical:8,paddingHorizontal:16},searchInput:{width:"100%",marginBottom:16},dropdownItem:{padding:10,marginTop:2,backgroundColor:"white",borderBottomWidth:1,borderBottomColor:"transparent"},itemsContainer:{maxHeight:140,marginTop:-14,marginBottom:8,borderRadius:10,zIndex:1},formLink:{textDecorationLine:"underline"},loginButton:{backgroundColor:"white",borderRadius:10,borderColor:"#F5F5F5",borderWidth:1,alignContent:"center",justifyContent:"center",paddingVertical:8,paddingHorizontal:16}}),ze=n(640);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return Le}));var Me=Object(ze.a)();function Le(){var e=Object(c.useState)({email:"",name:"",hospitalId:0}),t=i()(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){l.a.getItem(Te).then((function(e){var t=e&&JSON.parse(e);r(t)}))}),[]);var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.a,{colors:{primary:"rgb(255, 45, 85)",background:"#F5F5F5",card:"rgb(255, 255, 255)",text:"rgb(28, 28, 30)",border:"transparent"}});return s.a.createElement(le.Provider,{value:{user:n,setUser:r,logout:function(){l.a.removeItem(Te).then((function(){return r({email:"",name:"",hospitalId:0})}))}}},s.a.createElement(d.a,{theme:a},s.a.createElement(Me.Navigator,null,s.a.createElement(Me.Screen,{name:"Inicio",component:Ie}),s.a.createElement(Me.Screen,{name:"Login",component:De}),s.a.createElement(Me.Screen,{name:"Registro",component:Ae}))))}},357:function(e,t,n){n(358),e.exports=n(626)},358:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[357,1,2]]]);
//# sourceMappingURL=app.c778e784.chunk.js.map